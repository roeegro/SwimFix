
# <center> SwimFix<br> Maintenance Guide</center>

## Table of Contents
1. [Introduction](#Introduction)
2. [Client Side](#)
	* [Routes File](#)
	* [Directory Management](#)
	* [Video Trimmer](#)
	* [Test Generator](#)
	* [Requests Formats](#)
4. [Server Side](#)
	* [Request Parser File](#)
	* [Facade Module](#)
	* [Data_Extractor Module](#)
	* [Data_Analyser Module](#)
	* [Visualizer Module](#)
	* [Evaluator Module](#)
	* [File Management](#)
	* [Configurations](#)
5. [Adding Functionality Schema](#)
6. [Assimilation on New Hardware and Run All Program](#)

## Introduction
Our system has 3 main parts. The first one is the training infrastructure.
For more details, [click here](https://github.com/roeegro/SwimFix/tree/master/training).

The other 2 parts are used for the SwimFix web application and they include a web client part and a server for analysis and evaluation. Both parts written in Python and connect each other with TCP conneciton.

<Join here project hierarchy chart>


## Client Side
The client side is a web interface which supports 2 types of users : usual and admin ones. Usual user interface supports upload of video to the server (for analysis), view data and feedback about technique of previous swimming videos and also participate in forum. Admin users can also add tests and run them in the system in order to examine system's performance. More details about the user interface can be found in this [link](https://github.com/roeegro/SwimFix/tree/master/client).
We used Flask, a python web framework, to write the client side. This library enables the developers to load dynamically web pages with python code, define relations between pages, and even pass parameters from python code to html one.

<Client side structure must be put here>

**![](https://lh3.googleusercontent.com/4rXSsvwTc9hLFd1cDh10kOJAbYD8C5u8kpMKvfwv8FwKyc7tHST1vAkngfZQKVJ80fauS_ijGFq1a8o5vFiXhwmUgjRJLWGGn0v4FTWR0pOMUN93w08Oxol031Lci7-cEo18N8n6)

### Routes File
This is the most important module in the client side. It defines the web links of all the pages and binds them to the relevant html page (appears in templates directory). For each html page, there must be found a function in this .py file which looks as follows:

    @app.route('/', methods=['GET', 'POST'])  # only for home page definition
    @app.route("/<page-name>", methods=['GET', 'POST'])  
    def page_name():
		    <some code>  
           return render_template('page-name.html')

The first line denotes that the next url address is the home page of the site, and it should be placed to this page only. The methods specify the type of requests supported in this page.
The second line binds between the url address to the function below.
In the function there is a code, that frequently connects to the server in order to send requests or/and get responses.
Each function must return a redirection to some html page to be loaded in the browser.
You can pass other arguments to the respective html code by specifying them as follows

    return render_template('page-name.html',param1 = argument1,...)
Using this arguments in the respective html code is done as follows

    {{parameter name}}

> **Note**: Url address definition, function name and html page redirection returned in the end of the function name must be consistent, correlative and named by html and python conventions respectively.

 ### Directory Management
 
 **temp -** Contains zip files with information hold in the server, and some temporal folder which holds files to be shown in the browser.
 
**partial_movies -** Generated by the code and contains intervals of movies to be uploaded to the server. See video trimmer section for more details.

**uploaded_files  -** Generated by the code and contains videos uploaded before from the machine the user works on.

**static -** Contains temp directory and also css, js files, images and other files that are loaded or shown in the html pages shown in temp directory.

**templates -** Contains html code that are loaded by the Flask code as shown in the section above.

### Video Trimmer
Dear Liron, complete this section please.

### Test Generator (test_generator.py, test_generator.ui) 
A module for manual annotation of videos. A guide for user mode can be found at this [link](https://github.com/roeegro/SwimFix/tree/master/client#add-test).
The widgets, and their positions in the window is defined in .ui file. You can open ui files with program that can be found in scripts directory under python directory in programs directory.
Python file code is based on [PyQt5](https://doc.qt.io/qtforpython/) package.
This code manipulates those widgets in the code by QtApplication object which holdes all the widgets defined in the ui file. 
This module has 3 main parts: accessors to the widgets objects, events (for buttons), and some helper functions. The functions in each part are sorted by the alpha-bet for easier navigation.



<!--stackedit_data:
eyJoaXN0b3J5IjpbLTU4MjY5NzYyNCwyMDY1OTk5MjMyLDEwOD
A3NDQ1Miw1OTM0NTY4MjIsLTg0OTc2ODM2MSwtMTAyODAwOTM0
NiwtMTEyMjQyMTEzOSwtNDc3ODQwMzUyLC02ODM4MTIyNTAsLT
g2OTg4NDE2OSwtMjU5MTE2MjU3LC00MjA0NzMyMzUsLTE0ODU1
ODM5NzcsLTE3NDIzMTkxNzEsLTIxMTY2NDQ5OTksLTExNTA1NT
IwODgsLTMzMjQ1NTM2M119
-->