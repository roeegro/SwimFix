
# <center> SwimFix<br> Maintenance Guide</center>

## Table of Contents
1. [Introduction](#Introduction)
2. [Client Side](#login)
	* [Supported Functionality](#upload-video-to-the-server)
	* [Adding Features](#upload-video-to-the-server)
	* [File Management](#upload-video-to-the-server)
3. [Server Side](#register-user)
	* [Supported Functionality](#upload-video-to-the-server)
	* [Adding Features](#upload-video-to-the-server)
	* [File Management](#upload-video-to-the-server)
	* [Configurations](#upload-video-to-the-server)
4. [Assimilation on New Hardware](#register-user)

## Introduction
Our system has 3 main parts. The first one is the training infrastructure.
For more details, [click here](https://github.com/roeegro/SwimFix/tree/master/training).

The other 2 parts are used for the SwimFix web application and they include a web client part and a server for analysis and evaluation. Both parts written in Python and connect each other by TCP conneciton.

<Join here project hierarchy chart>


## Client Side
Login to the system is done by entering username and password and pressing on the Login button as seen in the picture:
**![](https://lh3.googleusercontent.com/4rXSsvwTc9hLFd1cDh10kOJAbYD8C5u8kpMKvfwv8FwKyc7tHST1vAkngfZQKVJ80fauS_ijGFq1a8o5vFiXhwmUgjRJLWGGn0v4FTWR0pOMUN93w08Oxol031Lci7-cEo18N8n6)**
In case a user is not registered in the system- pressing the blue link below the Login button will redirect you to the Registration page (next page).

### Register User
In this page, the user has to enter the following credentials:

-   Username in English- must begin with a letter.
    
-   Valid email address.
    
-   Password.
    
-   Password again.
    

  
If the user is already registered, you can go back to the login page by pressing on the blue link which appears below the Sign Up button.
**![](https://lh3.googleusercontent.com/3VlLSIV6KapoORkjeuQS7elqrfbS66HiwjcTpHn6IAIODUJlNPrUDcVEgqLO_w9RWgsLKPM1Jznj7J67tkL_fucijZGzOj04GvnpHYBoqClPA71Y8KFy6-ckjD8uqw3jTu1foPK1)**
After logging in to the system, there are 2 kinds of menus to 2 kinds of users:  
on the right menu- a menu for a regular user, and the two menus to the left are for an admin user. Admin users have all the regular user permissions, with more functionality that appears after pressing on the Admin Panel on the navigation bar and appears on the most left menu.

![](https://lh6.googleusercontent.com/CXKHOo0JpniuWg1WUz96RUWyTM0DJL-9Zs1x1lobdopziDFFiduZII6g3bDFbzILm3NYVueCmIF0ztvNZAMpu-jZdqbbV_0TaYjbnfpG4zq1ueq-cg5CDYxL-QhnDDLvOByl7aej)![](https://lh5.googleusercontent.com/C1RE_16rCDN4_41-5XE19elZoL-1BHkiJbD96n_au01UUgm_AqhjvAGFvw86ZdPdG2ZHQ6KodOyexs3xc4PEnczU-VvUJyaONojIojhHPg4s5ijO5HQsfV8njK6VWCLAXnkCYIdi)![](https://lh3.googleusercontent.com/U4GzAF8Ii86CLIpMQJvVgZST5SqKMCkbPi5JpdjoGKvu6bmGGfU8rQ7KpBsrJ-uBk2vP9g3366Z2m0KKOtsygQVNhEcrJBtFiDc-l7c41jDA43841G_FsNRa0-K8v7TA63yTZdM3)
  
Now we will describe the functionality in the interface.

## User Interface Functionality
###  Upload Video To The Server
The user can upload a video of him swimming front crawl style using a basic interface which enables choosing file and uploading it.  
A user can access this interface by pressing on “Load Video” on the navigation bar.  
After a video is uploaded, the user is redirected to the index page- and a success/failure message will appear.
![](https://lh4.googleusercontent.com/knnw5wdv8sEr-HpjFiRAgF9yRbPqNREXX65fuWWET0HshWkX3QEnd5FsN2y75_mGyU2RveXTSLyQ2zWS7X8KlBOJW0fov_TFKdqD5v4RZ7yxZmBwAqJEKx9St8JKIelc7YmhFT7K)
### Watching Feedbacks On Videos
The user can watch statistics extracted from his previous uploaded videos in the “Previous Feedbacks” page which can be accessed by pressing on “Previous Feedbacks” button in the navigation bar. 
![](https://lh4.googleusercontent.com/J8vcjRUfqQVWseFaGUE953txPiPYOZpXIfsP8kKJWM1KBAFN4_m2js_luQbFUX6GQejnRL425ESjCtgnTIlGCeALUtWZz0tcmtmLIzZ1LpNjYi6YgEOPzy2eY_h-pgABJqz5mlU2)
In this page there is a table containing all the feedbacks the user has received on his videos ordered by the upload date.
The user can watch the graphs extracted from his video by pressing on the “View graphs” button on the video’s row. By doing so, the user will be redirected to a page containing all the graphs in a dynamic view, which allows him to click on a point in a graph and see immediately the frame of the video in this point with a Wireframe on it.<span>
**Example:**
![](https://lh6.googleusercontent.com/KNclyogaT-jfia3YFZgoWCutEJr_2M30pWkjDsy9MnkwZXiKdJspuOKTXCXj8UFt14fB3KjzxTkxm73Q9sdBGF5zmRLtcGbDP-frXB8CQ96q3ao4-9c-Njhq1pFoAVV9zUBwb_H_)
[In this picture: the user clicked on frame number 136 in the graph, and immediately saw the frame corresponding with the number in the video, with annotations of keypoints and wireframe on the frame]
### Users Forum
The user interface implements Forum which can be accessed by pressing the “Forum” button in the navigation bar. The forum enables every user to write and share messages with all the system’s users.  
Functionality of the forum:

-   Viewing topics created by the users in the system.
    
-   Creating a new topic in the forum containing title and content. Done by filling the title and content in the bottom of the page and pressing the “Create” button.
    
-   Viewing posts in a topic by pressing on the topic’s name
    
-   Adding a post in a topic by filling the content and pressing the “Post” button
**![](https://lh5.googleusercontent.com/UZ1Fg_UMqAqA_xQhouBzVcCzMLrk214e_9Gc0Zxs_s6LrEcbi7XT0FVplgGeAebzWbTCWtaJzeywdbtqJxQQ9zTF2HAcC8285Nxd5QqdhjHUcnxWNt-xAmtCPKGDJK4LSCgylTv2)**
### Reading more info about the project
User can access more info about the project by pressing “About” on the navigation bar.

## Admin Interface Functionality
The following functionalities can be access only by Admin users:

### Plug and Play
Allows admin to send the server scripts in python for classifying swimming errors.
The server side implementation will be implemented in the future.

### Add Test
The following mechanism allows admin to manually annotate videos and save their annotation as csv and compare it to the OpenPose library performance.
The manual to the test adding interface:<br>
------------Test Generator Guide--------

Prerequisites:
1. You must have Python3 installed

Guide:

1. Run the script by clicking “Add Test” from the main menu.

2. Press on "Load Video" button in order to load a MOV video.

3. [Optional] : Press on "Load CSV" button in order to load existing csv file with key points (Look on CSV format section)

4. [Optional] : Press on "Default Settings" in order to load the default key points and lines settings.
Note that in this case you will not be able to define key points and lines by yourself, so you can continue to (7), and you will not be able to load csv for this running.


5. Insert records to body parts table. This table includes the following : Name of body part , x coordinate for current frame and y one.
   In this level, just type the body parts you want to include in your test. Insertion of new body part are done by pressing "Insert Row".
Finish to do the above is done by pressing the "Finish define table" button.

6. At the bottom of the window you can find to drop down lists in order to define the connections between 2 body parts you want to include
   as line in every frame. Insertion of line is done by "Add" button. Finish definition the above is done by pressing "Finish line definition"

7. The first frame of the loaded video is shown.

8. You can now move between the frames of the loaded movie (Prev and Next buttons). 

Getting the key points coordinates is done as follows:

A. By default- the first body part to be taken is the first one, unless you defined otherwise.
	
B. Selection of specific body part is done by pressing the match line of your body part choice, e.g in one of the cell in this line.
Pay attention that after you paint the point in this case, points measurement continues in the next body part.
	
C. Undo button - in order to delete some body part coordinates, you need to click on one of the cells of the matched line of the expected body part. The next body part to be measured is the selected one.
	
D. Clean all button - deletes all the records of the current frame from the table, and also the points and lines in the shown frame.
	
E. Prev button - Saves the current frame records, and move to the previous frame.
	
F. Next button - similarly to E, but moves to the next one. 
Pay attention: When finish all frames of the given movie - the program will be closed.
	
G. Load video button - loads other video. Working with the new video is done by following this guide again.
Pay attention - choosing this option will overload accumulated data, e.g the data will not be saved!!
	
H. The red button will save the accumulated information. See output section.



Output Section:

The next data is saved as an output of the program in the working directory:
1. .MOV file named by the given file with the wireframe painted for each frame you did so.
2. .CSV file with the key points coordinated you signed before for each frame. Please read CSV Output section.


CSV Input Section:

There is an expected format for the csv file.
The csv must include the following columns : Frame Number , <body_part>* s.t 
<body_part> := <body_part>_X , <body_part>_Y


CSV Output Section:

The CSV output format is as follows:
You will have for each frame number the X and Y coordinated for each body part mentioned in body parts table in the program.
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTA4NjQ0ODYyMSw2OTA2Njg5OTFdfQ==
-->
<!--stackedit_data:
eyJoaXN0b3J5IjpbMjEyMDIyNDU4NSwtMTc0MjMxOTE3MSwtMj
ExNjY0NDk5OSwtMTE1MDU1MjA4OCwtMzMyNDU1MzYzXX0=
-->